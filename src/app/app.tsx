const radioData = [
  {
    changeuuid: '610cafba-71d8-40fc-bf68-1456ec973b9d',
    stationuuid: '941ef6f1-0699-4821-95b1-2b678e3ff62e',
    serveruuid: '8a4a8315-6ff3-4af8-8ee7-24ce0acbaeec',
    name: '\tBest FM',
    url: 'http://stream.bestfm.sk/128.mp3',
    url_resolved: 'http://stream.bestfm.sk/128.mp3',
    homepage: 'http://bestfm.sk/',
    favicon: '',
    tags: '',
    country: 'Slovakia',
    countrycode: 'SK',
    iso_3166_2: null,
    state: '',
    language: '',
    languagecodes: '',
    votes: 40,
    lastchangetime: '2022-11-01 08:40:32',
    lastchangetime_iso8601: '2022-11-01T08:40:32Z',
    codec: 'MP3',
    bitrate: 128,
    hls: 0,
    lastcheckok: 1,
    lastchecktime: '2023-06-19 20:54:41',
    lastchecktime_iso8601: '2023-06-19T20:54:41Z',
    lastcheckoktime: '2023-06-19 20:54:41',
    lastcheckoktime_iso8601: '2023-06-19T20:54:41Z',
    lastlocalchecktime: '2023-06-19 20:54:41',
    lastlocalchecktime_iso8601: '2023-06-19T20:54:41Z',
    clicktimestamp: '2023-06-20 11:13:15',
    clicktimestamp_iso8601: '2023-06-20T11:13:15Z',
    clickcount: 44,
    clicktrend: -1,
    ssl_error: 0,
    geo_lat: null,
    geo_long: null,
    has_extended_info: false,
  },
  {
    changeuuid: '66536509-b54b-4a4e-8f39-bad1fdb6e539',
    stationuuid: '9d69cc77-b698-40c0-8036-17cd1f09ca44',
    serveruuid: 'd6474059-e9b1-439c-aa72-da33f732c82a',
    name: '\tFun Radio',
    url: 'http://stream.funradio.sk:8000/fun128.mp3',
    url_resolved: 'http://stream.funradio.sk:8000/fun128.mp3',
    homepage: 'http://www.funradio.sk/',
    favicon:
      'http://www.funradio.sk/img/logo/apple-icon-120x120.png?v=2022-11-24-1332',
    tags: '',
    country: 'Slovakia',
    countrycode: 'SK',
    iso_3166_2: null,
    state: '',
    language: '',
    languagecodes: '',
    votes: 54,
    lastchangetime: '2023-02-19 08:31:32',
    lastchangetime_iso8601: '2023-02-19T08:31:32Z',
    codec: 'MP3',
    bitrate: 128,
    hls: 0,
    lastcheckok: 1,
    lastchecktime: '2023-06-19 22:31:05',
    lastchecktime_iso8601: '2023-06-19T22:31:05Z',
    lastcheckoktime: '2023-06-19 22:31:05',
    lastcheckoktime_iso8601: '2023-06-19T22:31:05Z',
    lastlocalchecktime: '2023-06-19 22:31:05',
    lastlocalchecktime_iso8601: '2023-06-19T22:31:05Z',
    clicktimestamp: '2023-06-20 11:11:17',
    clicktimestamp_iso8601: '2023-06-20T11:11:17Z',
    clickcount: 84,
    clicktrend: -10,
    ssl_error: 0,
    geo_lat: null,
    geo_long: null,
    has_extended_info: false,
  },
  {
    changeuuid: '4d41c514-0afc-4783-8696-337179ddde5f',
    stationuuid: '6e79967a-aac0-488d-89ec-7656f6db4ca8',
    serveruuid: '46ce76c5-203b-43e3-b709-5748219f9fcd',
    name: '\tNewstalk ZB Auckland',
    url: 'https://ais-nzme.streamguys1.com/nz_002_aac',
    url_resolved: 'https://ais-nzme.streamguys1.com/nz_002_aac',
    homepage: 'https://www.newstalkzb.co.nz/',
    favicon: 'https://radio-ecuador.com/favicon.ico',
    tags: 'pasillo',
    country: 'Ecuador',
    countrycode: 'EC',
    iso_3166_2: null,
    state: 'AZ',
    language: 'spanish',
    languagecodes: 'es',
    votes: 61,
    lastchangetime: '2022-08-10 04:07:25',
    lastchangetime_iso8601: '2022-08-10T04:07:25Z',
    codec: 'AAC+',
    bitrate: 33,
    hls: 0,
    lastcheckok: 1,
    lastchecktime: '2023-06-19 23:06:11',
    lastchecktime_iso8601: '2023-06-19T23:06:11Z',
    lastcheckoktime: '2023-06-19 23:06:11',
    lastcheckoktime_iso8601: '2023-06-19T23:06:11Z',
    lastlocalchecktime: '2023-06-19 23:06:11',
    lastlocalchecktime_iso8601: '2023-06-19T23:06:11Z',
    clicktimestamp: '2023-06-20 13:04:56',
    clicktimestamp_iso8601: '2023-06-20T13:04:56Z',
    clickcount: 36,
    clicktrend: -2,
    ssl_error: 0,
    geo_lat: null,
    geo_long: null,
    has_extended_info: false,
  },
  {
    changeuuid: 'e3696ca5-6e2c-415c-9395-5c81659c94ba',
    stationuuid: 'a25700ef-e952-4b73-8b4e-b92d938cb020',
    serveruuid: '46ce76c5-203b-43e3-b709-5748219f9fcd',
    name: '\tNewstalk ZB Auckland',
    url: 'https://ais-nzme.streamguys1.com/nz_002_aac',
    url_resolved: 'https://ais-nzme.streamguys1.com/nz_002_aac',
    homepage: 'https://www.newstalkzb.co.nz/',
    favicon:
      'https://www.newstalkzb.co.nz/content/news/images/interface/icons/newstalkzb/apple-touch-icon.png',
    tags: '',
    country: 'New Zealand',
    countrycode: 'NZ',
    iso_3166_2: null,
    state: 'BOP',
    language: '',
    languagecodes: '',
    votes: 143,
    lastchangetime: '2023-05-30 13:49:29',
    lastchangetime_iso8601: '2023-05-30T13:49:29Z',
    codec: 'AAC+',
    bitrate: 33,
    hls: 0,
    lastcheckok: 1,
    lastchecktime: '2023-06-19 15:17:09',
    lastchecktime_iso8601: '2023-06-19T15:17:09Z',
    lastcheckoktime: '2023-06-19 15:17:09',
    lastcheckoktime_iso8601: '2023-06-19T15:17:09Z',
    lastlocalchecktime: '2023-06-19 15:17:09',
    lastlocalchecktime_iso8601: '2023-06-19T15:17:09Z',
    clicktimestamp: '2023-06-20 11:54:54',
    clicktimestamp_iso8601: '2023-06-20T11:54:54Z',
    clickcount: 41,
    clicktrend: 3,
    ssl_error: 0,
    geo_lat: null,
    geo_long: null,
    has_extended_info: false,
  },
  {
    changeuuid: '4c80a460-d7e6-4bf0-b043-7e359203a72e',
    stationuuid: '98152a6d-9a3d-46d7-8019-c8c03f29be38',
    serveruuid: '8644b0a8-d9d0-4896-b97a-077c8709db70',
    name: '\tPolskie Radio Bialystok',
    url: 'http://stream4.nadaje.com:15476/radiobialystok',
    url_resolved: 'http://stream4.nadaje.com:15476/radiobialystok',
    homepage: 'http://www.radio.bialystok.pl/',
    favicon: '',
    tags: '',
    country: 'Poland',
    countrycode: 'PL',
    iso_3166_2: null,
    state: '',
    language: 'polish',
    languagecodes: 'pl',
    votes: 48,
    lastchangetime: '2022-04-19 11:45:32',
    lastchangetime_iso8601: '2022-04-19T11:45:32Z',
    codec: 'MP3',
    bitrate: 128,
    hls: 0,
    lastcheckok: 1,
    lastchecktime: '2023-06-20 11:17:16',
    lastchecktime_iso8601: '2023-06-20T11:17:16Z',
    lastcheckoktime: '2023-06-20 11:17:16',
    lastcheckoktime_iso8601: '2023-06-20T11:17:16Z',
    lastlocalchecktime: '2023-06-20 02:33:08',
    lastlocalchecktime_iso8601: '2023-06-20T02:33:08Z',
    clicktimestamp: '2023-06-20 12:21:06',
    clicktimestamp_iso8601: '2023-06-20T12:21:06Z',
    clickcount: 59,
    clicktrend: 0,
    ssl_error: 0,
    geo_lat: 53.12895934801765,
    geo_long: 23.14600810575091,
    has_extended_info: false,
  },
  {
    changeuuid: '632e7df9-033b-4994-bfa5-df8688a3b6d3',
    stationuuid: '0c6860fd-dfec-469d-9ef7-48711c43d465',
    serveruuid: '77dbecc6-b04a-4c3a-9424-2a33f958f39a',
    name: '\tRadio Bruno Pentasport Fiorentina',
    url: 'https://stream3.xdevel.com/audio6s975355-281/stream/icecast.audio',
    url_resolved:
      'https://stream3.xdevel.com/audio6s975355-281/stream/icecast.audio',
    homepage: 'http://www.radiobrunotoscana.it/',
    favicon: '',
    tags: '',
    country: 'Italy',
    countrycode: 'IT',
    iso_3166_2: null,
    state: 'Toscana',
    language: '',
    languagecodes: '',
    votes: 66,
    lastchangetime: '2022-08-31 07:29:29',
    lastchangetime_iso8601: '2022-08-31T07:29:29Z',
    codec: 'AAC+',
    bitrate: 0,
    hls: 0,
    lastcheckok: 1,
    lastchecktime: '2023-06-19 22:58:52',
    lastchecktime_iso8601: '2023-06-19T22:58:52Z',
    lastcheckoktime: '2023-06-19 22:58:52',
    lastcheckoktime_iso8601: '2023-06-19T22:58:52Z',
    lastlocalchecktime: '2023-06-19 21:19:24',
    lastlocalchecktime_iso8601: '2023-06-19T21:19:24Z',
    clicktimestamp: '2023-06-20 12:39:53',
    clicktimestamp_iso8601: '2023-06-20T12:39:53Z',
    clickcount: 67,
    clicktrend: 3,
    ssl_error: 0,
    geo_lat: null,
    geo_long: null,
    has_extended_info: false,
  },
  {
    changeuuid: '93bf8784-cf71-4d99-ae63-c3ab49b0cc11',
    stationuuid: 'ab909bf6-16f9-4066-b000-9b0b1bb5cd9c',
    serveruuid: '63175bc0-cd26-4060-8c89-ae5802f78544',
    name: '\tTick Tock Radio - 1950',
    url: 'https://streaming.ticktock.radio/tt/1950/icecast.audio',
    url_resolved: 'https://streaming.ticktock.radio/tt/1950/icecast.audio',
    homepage: 'https://ticktock.radio/',
    favicon: 'https://ticktock.radio/static/assets/img/apple-icon-120x120.png',
    tags: '1950',
    country: 'Finland',
    countrycode: 'FI',
    iso_3166_2: null,
    state: '',
    language: 'finnish',
    languagecodes: 'fi',
    votes: 91,
    lastchangetime: '2022-06-19 22:06:15',
    lastchangetime_iso8601: '2022-06-19T22:06:15Z',
    codec: 'MP3',
    bitrate: 0,
    hls: 0,
    lastcheckok: 1,
    lastchecktime: '2023-06-19 17:12:47',
    lastchecktime_iso8601: '2023-06-19T17:12:47Z',
    lastcheckoktime: '2023-06-19 17:12:47',
    lastcheckoktime_iso8601: '2023-06-19T17:12:47Z',
    lastlocalchecktime: '2023-06-19 14:02:48',
    lastlocalchecktime_iso8601: '2023-06-19T14:02:48Z',
    clicktimestamp: '2023-06-20 06:38:02',
    clicktimestamp_iso8601: '2023-06-20T06:38:02Z',
    clickcount: 55,
    clicktrend: -1,
    ssl_error: 0,
    geo_lat: 60.23980983862846,
    geo_long: 24.92578312754631,
    has_extended_info: false,
  },
  {
    changeuuid: 'f4e2d3fb-3042-40a1-824d-954a9e87a6c8',
    stationuuid: '4ba75473-8d53-4a71-b797-9a73798265c4',
    serveruuid: '21c53694-969a-40c7-8641-10a7cce163f9',
    name: '\tЕвропа Плюс',
    url: 'http://ep256.hostingradio.ru:8052/europaplus256.mp3',
    url_resolved: 'http://ep256.hostingradio.ru:8052/europaplus256.mp3',
    homepage: 'http://www.europaplus.ru/',
    favicon: 'http://liveam.tv/img/2494.jpg',
    tags: '',
    country: 'The Russian Federation',
    countrycode: 'RU',
    iso_3166_2: null,
    state: '',
    language: '',
    languagecodes: '',
    votes: 713,
    lastchangetime: '2022-08-09 05:39:48',
    lastchangetime_iso8601: '2022-08-09T05:39:48Z',
    codec: 'MP3',
    bitrate: 128,
    hls: 0,
    lastcheckok: 1,
    lastchecktime: '2023-06-20 00:27:39',
    lastchecktime_iso8601: '2023-06-20T00:27:39Z',
    lastcheckoktime: '2023-06-20 00:27:39',
    lastcheckoktime_iso8601: '2023-06-20T00:27:39Z',
    lastlocalchecktime: '2023-06-20 00:27:39',
    lastlocalchecktime_iso8601: '2023-06-20T00:27:39Z',
    clicktimestamp: '2023-06-20 12:22:21',
    clicktimestamp_iso8601: '2023-06-20T12:22:21Z',
    clickcount: 498,
    clicktrend: -2,
    ssl_error: 0,
    geo_lat: null,
    geo_long: null,
    has_extended_info: false,
  },
  {
    changeuuid: '1125c2aa-61e0-4d77-9d1e-6d542417489b',
    stationuuid: '11a437b5-e77c-470b-9041-33098eeafbdb',
    serveruuid: '0ecc8c83-1b7f-4802-b458-332e4bc9a44f',
    name: '\nInvoice Radio',
    url: 'https://c2.radioboss.fm:18434/stream',
    url_resolved: 'https://c2.radioboss.fm:18434/stream',
    homepage: 'https://c2.radioboss.fm:18434/stream',
    favicon: '',
    tags: 'talk & speech',
    country: 'The Russian Federation',
    countrycode: 'RU',
    iso_3166_2: null,
    state: '',
    language: '',
    languagecodes: '',
    votes: 9,
    lastchangetime: '2023-01-07 11:19:06',
    lastchangetime_iso8601: '2023-01-07T11:19:06Z',
    codec: 'MP3',
    bitrate: 128,
    hls: 0,
    lastcheckok: 1,
    lastchecktime: '2023-06-20 02:26:44',
    lastchecktime_iso8601: '2023-06-20T02:26:44Z',
    lastcheckoktime: '2023-06-20 02:26:44',
    lastcheckoktime_iso8601: '2023-06-20T02:26:44Z',
    lastlocalchecktime: '2023-06-20 02:26:44',
    lastlocalchecktime_iso8601: '2023-06-20T02:26:44Z',
    clicktimestamp: '2023-06-20 00:12:01',
    clicktimestamp_iso8601: '2023-06-20T00:12:01Z',
    clickcount: 41,
    clicktrend: 1,
    ssl_error: 0,
    geo_lat: null,
    geo_long: null,
    has_extended_info: false,
  },
  {
    changeuuid: 'e61002c2-e072-492d-829e-cdee4bb1104f',
    stationuuid: 'c4de7d17-ae8c-4068-94a8-02e6156ef5cc',
    serveruuid: 'd46d6ab1-0775-4ec7-aab1-f496e6bd0bb9',
    name: '\nRADIO MARIAM ARABIC\n',
    url: 'http://dreamsiteradiocp4.com:8046/stream',
    url_resolved: 'http://dreamsiteradiocp4.com:8046/stream',
    homepage: '',
    favicon: '',
    tags: 'classical',
    country: 'Afghanistan',
    countrycode: 'AF',
    iso_3166_2: null,
    state: '',
    language: '',
    languagecodes: '',
    votes: 17,
    lastchangetime: '2023-04-28 10:56:00',
    lastchangetime_iso8601: '2023-04-28T10:56:00Z',
    codec: 'AAC+',
    bitrate: 64,
    hls: 0,
    lastcheckok: 1,
    lastchecktime: '2023-06-20 13:23:48',
    lastchecktime_iso8601: '2023-06-20T13:23:48Z',
    lastcheckoktime: '2023-06-20 13:23:48',
    lastcheckoktime_iso8601: '2023-06-20T13:23:48Z',
    lastlocalchecktime: '2023-06-20 13:23:48',
    lastlocalchecktime_iso8601: '2023-06-20T13:23:48Z',
    clicktimestamp: '2023-06-20 10:50:52',
    clicktimestamp_iso8601: '2023-06-20T10:50:52Z',
    clickcount: 97,
    clicktrend: 1,
    ssl_error: 0,
    geo_lat: null,
    geo_long: null,
    has_extended_info: false,
  },
];
import './global.css';

import { useState, useRef } from 'react';
import MenuHamburguer from './menu-hamburguer';
import { AiOutlinePlayCircle, AiOutlinePause } from 'react-icons/ai';
import { BsStopFill } from 'react-icons/bs';
import { RiEdit2Line, RiDeleteBin2Line } from 'react-icons/ri';
import RadioEditModal from './radioEdit';

function App() {
  const [favoriteRadios, setFavoriteRadios] = useState([]);
  const [searchQueryMenu, setSearchQueryMenu] = useState('');
  const [searchQueryMain, setSearchQueryMain] = useState('');
  const [playingRadio, setPlayingRadio] = useState(null);
  const [editingRadio, setEditingRadio] = useState(null);
  const audioRef = useRef(null);

  const filteredRadiosMenu = radioData.filter((radio) =>
    radio.name.toLowerCase().includes(searchQueryMenu.toLowerCase())
  );

  const filteredFavoriteRadios = favoriteRadios.filter((radio) =>
    radio.name.toLowerCase().includes(searchQueryMain.toLowerCase())
  );

  const handleEditRadio = (radio) => {
    setEditingRadio(radio);
  };

  const handleSaveRadio = (editedRadio) => {
    // Lógica para salvar as alterações no rádio
    // Atualize o estado da lista de rádios favoritos com as alterações

    setEditingRadio(null); // Fecha o modal de edição após salvar
  };

  const handleCancelEdit = () => {
    setEditingRadio(null); // Fecha o modal de edição sem salvar
  };

  const handlePlayPause = (radio) => {
    if (playingRadio && playingRadio.stationuuid === radio.stationuuid) {
      audioRef.current.pause();
      setPlayingRadio(null);
    } else {
      audioRef.current.src = radio.url;
      audioRef.current.play();
      setPlayingRadio(radio);
    }
  };

  const handleStop = () => {
    audioRef.current.pause();
    audioRef.current.currentTime = 0;
    setPlayingRadio(null);
  };

  const handleDeleteRadio = (radio) => {
    setFavoriteRadios(
      favoriteRadios.filter(
        (favRadio) => favRadio.stationuuid !== radio.stationuuid
      )
    );
    // Atualizar também o estado do menu
  };

  return (
    <div className="bg-gray-100 min-h-screen flex">
      <nav className="bg-white shadow">
        <MenuHamburguer
          radioData={filteredRadiosMenu}
          favoriteRadios={favoriteRadios}
          setFavoriteRadios={setFavoriteRadios}
          searchQueryMenu={searchQueryMenu}
          setSearchQueryMenu={setSearchQueryMenu}
        />
      </nav>
      <main className="container mx-auto p-4">
        <div className="flex flex-col gap-4">
          <input
            type="text"
            value={searchQueryMain}
            onChange={(e) => setSearchQueryMain(e.target.value)}
            placeholder="Buscar rádio"
            className="border border-gray-400 rounded px-2 py-1"
          />

          <h1 className="text-2xl font-bold">Rádios Favoritas</h1>
          <ul>
            {filteredFavoriteRadios.map((radio) => (
              <li
                key={radio.stationuuid}
                className="flex items-center justify-between bg-white rounded shadow p-4"
              >
                <span>{radio.name}</span>
                <div>
                  {playingRadio &&
                  playingRadio.stationuuid === radio.stationuuid ? (
                    <button
                      className="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded"
                      onClick={handleStop}
                    >
                      <BsStopFill className="h-6 w-6 inline-block align-text-bottom" />
                    </button>
                  ) : (
                    <>
                      <button
                        className="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded mr-2"
                        onClick={() => handlePlayPause(radio)}
                      >
                        <AiOutlinePlayCircle className="h-6 w-6 inline-block align-text-bottom" />
                      </button>
                      <button
                        className="bg-yellow-500 hover:bg-yellow-700 text-white font-bold py-2 px-4 rounded mr-2"
                        onClick={() => handleEditRadio(radio)}
                      >
                        <RiEdit2Line className="h-6 w-6 inline-block align-text-bottom" />
                      </button>
                      <button
                        className="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded"
                        onClick={() => handleDeleteRadio(radio)}
                      >
                        <RiDeleteBin2Line className="h-6 w-6 inline-block align-text-bottom" />
                      </button>
                    </>
                  )}
                </div>
              </li>
            ))}
          </ul>
        </div>
      </main>
      <audio ref={audioRef}></audio>
      {editingRadio && (
        <RadioEditModal
          radio={editingRadio}
          onSave={handleSaveRadio}
          onCancel={handleCancelEdit}
        />
      )}
    </div>
  );
}

export default App;
